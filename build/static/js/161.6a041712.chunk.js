(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[161],{2218:function(e,l,a){"use strict";a.r(l);var t=a(28),n=a(0),o=a.n(n),i=a(62);l.default=()=>{const[e,l]=Object(n.useState)(null),[a,c]=Object(n.useState)(!1),[r,u]=Object(n.useState)(null),[m,d]=Object(n.useState)({price:null,owner:null,floor:null,building:null,unit:null,flat:null,allotmentDate:null,parking:null,id:null,bookingDate:null,agreementDate:null}),[s,v]=Object(n.useState)(null),[g,p]=Object(n.useState)(null);let b,E;const N=e=>{b=e.target.name,E=e.target.value,d({...m,[b]:E})},[h,f]=Object(n.useState)(null);Object(i.g)();Object(n.useEffect)(()=>{(async()=>{const e=await t.a.get("https://growbuild-jg.onrender.com/api/all/project",{Headers:{"Content-Type":"application/json"}});f(e.data)})()},[]);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"container bg-white p-2 rounded-2"},o.a.createElement("form",{className:"row px-4 py-4 mx-2 my-2 justify-content-center shadow-lg"},o.a.createElement("h3",{className:"text-alternate text-primary"},"Set Booking"),o.a.createElement("hr",null),o.a.createElement("div",{className:"col-md-6 col-12 mb-2"},o.a.createElement("p",{className:"text-alternate"},"Select Project"),o.a.createElement("div",{className:"input-group"},o.a.createElement("select",{className:"form-control",id:"project",onChange:e=>{N(e),(async e=>{if((24===(null===e||void 0===e?void 0:e.length)||12===(null===e||void 0===e?void 0:e.length))&&"Select Project"!==e){const l=await t.a.get("".concat("https://growbuild-jg.onrender.com","/api/buildings/").concat(e),{Headers:{"Content-Type":"application/json"}});v(l.data)}})(e.target.value)},name:"Project",value:m.Project},null===h?o.a.createElement("option",{value:null,name:null},"Loading..."):o.a.createElement("option",{value:null,name:null},"Select Project"),null!==h&&0===(null===h||void 0===h?void 0:h.length)&&o.a.createElement("option",{value:null,name:null},"No projects Avaliable"),null!==h&&(null===h||void 0===h?void 0:h.length)>0&&h.map(e=>o.a.createElement("option",{name:null===e||void 0===e?void 0:e._id,value:null===e||void 0===e?void 0:e._id},null===e||void 0===e?void 0:e.Name))))),o.a.createElement("div",{className:"col-md-6 col-12 mb-2"},o.a.createElement("p",{className:"text-alternate"},"Select Building"),o.a.createElement("div",{className:"input-group"},o.a.createElement("select",{className:"form-control",id:"building",name:"building",onChange:e=>{N(e),(async e=>{if(24===(null===e||void 0===e?void 0:e.length)||12===(null===e||void 0===e?void 0:e.length)){const l=await t.a.get("".concat("https://growbuild-jg.onrender.com","/api/building/").concat(e),{Headers:{"Content-Type":"application/json"}});p(l.data)}})(e.target.value),(async(e,l)=>{if((24===(null===e||void 0===e?void 0:e.length)||12===(null===e||void 0===e?void 0:e.length))&&(24===(null===l||void 0===l?void 0:l.length)||12===(null===l||void 0===l?void 0:l.length))){const a=await t.a.get("".concat("https://growbuild-jg.onrender.com","/api/find/unit/").concat(e,"/").concat(l),{Headers:{"Content-Type":"application/json"}});u(a.data)}})(e.target.value,null===m||void 0===m?void 0:m.Project)},value:m.building},null===m.Project?o.a.createElement("option",{value:null,name:null},"First select Project"):o.a.createElement(o.a.Fragment,null,null===s&&o.a.createElement("option",{value:null,name:null},"Loading..."),null!==s&&0===(null===s||void 0===s?void 0:s.length)&&o.a.createElement("option",{value:null,name:null},"No Building Avaliable")),(null===s||void 0===s?void 0:s.length)>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement("option",{value:null,name:null},"Select Building"),null===s||void 0===s?void 0:s.map(e=>o.a.createElement(o.a.Fragment,null,o.a.createElement("option",{value:null===e||void 0===e?void 0:e._id,name:null===e||void 0===e?void 0:e._id},null===e||void 0===e?void 0:e.buildingName))))))),o.a.createElement("div",{className:"col-md-4 col-12 mb-2"},o.a.createElement("p",{className:"text-alternate"},"Select Floor"),o.a.createElement("div",{className:"input-group"},o.a.createElement("select",{className:"form-control",id:"floor",name:"floor",onChange:e=>{N(e)},value:m.floor},null===g?o.a.createElement("option",{value:null,name:null},"Loading..."):o.a.createElement("option",{value:null,name:null},"Select Floor"),null!==g&&0===(null===g||void 0===g?void 0:g.total_number_of_floors)&&o.a.createElement("option",{value:null,name:null},"No Floor Avaliable"),null!==g&&(null===g||void 0===g?void 0:g.total_number_of_floors)>0&&(e=>{const l=[];for(let a=0;a<e;a++)l.push(o.a.createElement("option",{key:a,value:a},a));return l})(null===g||void 0===g?void 0:g.total_number_of_floors)))),o.a.createElement("div",{className:"col-md-4 col-12 mb-2"},o.a.createElement("p",{className:"text-alternate"},"Select Unit"),o.a.createElement("div",{className:"input-group"},o.a.createElement("select",{className:"form-control",id:"unit",name:"unit",onChange:e=>{N(e)},value:m.unit},null===m.Project&&null===m.building&&o.a.createElement("option",{value:null,name:null},"Select Project"),null===m.building&&null!==m.Project&&o.a.createElement("option",{value:null,name:null},"Select Building"),null!==m.building&&null!==m.Project&&null===r&&o.a.createElement("option",{value:null,name:null},"Loading..."),null!==r&&o.a.createElement(o.a.Fragment,null,0===r.length?o.a.createElement("option",{value:null,name:null},"No Units Avaliable."):o.a.createElement("option",{value:null,name:null},"Select Unit"),r.length>0&&r.map(e=>{let l="";if(l=e.unit_name,l=l.slice(0,1),l===m.floor)return o.a.createElement("option",{value:null===e||void 0===e?void 0:e._id,name:null===e||void 0===e?void 0:e._id},null===e||void 0===e?void 0:e.unit_name)}))))),o.a.createElement("div",{className:"col-md-4 col-12 mb-2"},o.a.createElement("p",{className:"text-alternate"},"Fetch Data"),o.a.createElement("button",{type:"button",className:"btn btn-primary ",onClick:()=>(async(e,a,n)=>{if((12===e.length||24===e.length)&&(12===a.length||24===a.length)&&(12===n.length||24===n.length)){const o=await t.a.get("".concat("https://growbuild-jg.onrender.com","/api/").concat(e,"/").concat(a,"/").concat(n),{Headers:{"Content-Type":"application/json"}});if(201===o.status)c(!1),d({...m,price:0,owner:"No Record Found!",floor:m.floor,building:m.building,unit:m.unit,allotmentDate:null,parking:0,id:m.id,bookingDate:null,agreementDate:null});else if(200===o.status){c(!0),l(o.data),console.log(o.data);let e=o.data;d({...m,price:null===e||void 0===e?void 0:e.booking.booking_price,owner:null===e||void 0===e?void 0:e.booking.first_applicant_name,floor:m.floor,building:m.building,unit:m.unit,allotmentDate:null===e||void 0===e?void 0:e.booking.allotment_date,parking:null===e||void 0===e?void 0:e.booking.parking,id:m.id,bookingDate:null===e||void 0===e?void 0:e.booking.booking_date,agreementDate:null===e||void 0===e?void 0:e.booking.agreement_date})}}})(m.building,m.Project,m.unit)},"Fetch Booking")),o.a.createElement("div",{className:"col-md-4 col-12 mb-2"},o.a.createElement("p",{className:"text-alternate"},"Owner Name"),o.a.createElement("div",{className:"input-group"},o.a.createElement("input",{type:"text","aria-label":"ownerName",placeholder:"Select Flat first",readOnly:"true",value:null===m||void 0===m?void 0:m.owner,name:"owner",onChange:N,className:"form-control"}))),o.a.createElement("div",{className:"col-md-4 col-12 mb-2"},o.a.createElement("p",{className:"text-alternate"},"Parking"),o.a.createElement("div",{className:"input-group"},o.a.createElement("input",{type:"number","aria-label":"Parking No",placeholder:"Enter Parking No",className:"form-control",name:"parking",value:null===m||void 0===m?void 0:m.parking,onChange:N,disabled:!0}))),o.a.createElement("div",{className:"col-md-4 col-12 mb-2"},o.a.createElement("p",{className:"text-alternate"},"Booking Price"),o.a.createElement("div",{className:"input-group"},o.a.createElement("input",{type:"text",className:"form-control",id:"price",name:"price",value:m.price,onChange:N,readOnly:"true",required:""}))),o.a.createElement("div",{className:"col-md-4 col-12 mb-2"},o.a.createElement("p",{className:"text-alternate"}," Booking Date"),o.a.createElement("div",{className:"input-group"},o.a.createElement("input",{type:"date",className:"form-control",id:"bookingDate",name:"bookingDate",onChange:N,value:null===m||void 0===m?void 0:m.bookingDate,required:""}))),o.a.createElement("div",{className:"col-md-4 col-12 mb-2"},o.a.createElement("p",{className:"text-alternate"}," Allotment Date"),o.a.createElement("div",{className:"input-group"},o.a.createElement("input",{type:"date",className:"form-control",id:"allotmentDate",name:"allotmentDate",onChange:N,value:null===m||void 0===m?void 0:m.allotmentDate,required:""}))),o.a.createElement("div",{className:"col-md-4 col-12 mb-2"},o.a.createElement("p",{className:"text-alternate"}," Agreement Date"),o.a.createElement("div",{className:"input-group"},o.a.createElement("input",{type:"date",className:"form-control",id:"agreementDate",name:"agreementDate",onChange:N,value:null===m||void 0===m?void 0:m.agreementDate,required:""}))))))}}}]);
//# sourceMappingURL=161.6a041712.chunk.js.map