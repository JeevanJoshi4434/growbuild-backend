(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[164],{2201:function(e,t,a){"use strict";a.r(t);var l=a(28),n=a(0),o=a.n(n),i=a(327),c=a(454),r=a(62),d=a(870),u=a.n(d);t.default=()=>{const[e,t]=Object(n.useState)(!1),[a,d]=Object(n.useState)(null),[m,s]=Object(n.useState)({Project:null,Building:null,stage_name:null,amount:null,extra_facilities:null}),[v,g]=Object(n.useState)(null),[p,b]=Object(n.useState)(null);let E,j;const h=e=>{E=e.target.name,j=e.target.value,s({...m,[E]:j})},[w,y]=Object(n.useState)(null);var N=Object(r.g)();Object(n.useEffect)(()=>{(async()=>{const e=await l.a.get("https://growbuild-jg.onrender.com/api/all/project",{Headers:{"Content-Type":"application/json"}});y(e.data)})()},[]);const x=async e=>{if((24===(null===e||void 0===e?void 0:e.length)||12===(null===e||void 0===e?void 0:e.length))&&"Select Project"!==e){const t=await l.a.get("".concat("https://growbuild-jg.onrender.com","/api/buildings/").concat(e),{Headers:{"Content-Type":"application/json"}});g(t.data),console.log(t.data)}},_=async e=>{if(24===(null===e||void 0===e?void 0:e.length)||12===(null===e||void 0===e?void 0:e.length)){const t=await l.a.get("".concat("https://growbuild-jg.onrender.com","/api/building/").concat(e),{Headers:{"Content-Type":"application/json"}});b(t.data),console.log(t.data)}},f=async()=>{const e=await l.a.get("".concat("https://growbuild-jg.onrender.com","/api/get/all/demand"),{Headers:{"Content-Type":"application/json"}});d(e.data)};return Object(n.useEffect)(()=>{f()},[]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"container bg-white p-2 rounded-2"},o.a.createElement("form",{className:"row px-4 py-4 mx-2 my-2 shadow-lg needs-validation",novalidate:!0},o.a.createElement("h3",{className:"text-alternate text-primary"},"Payment Plans"),o.a.createElement("hr",null),o.a.createElement("div",{className:"col-md-6 col-12 mb-2"},o.a.createElement("p",{className:"text-alternate"},"Select Project"),o.a.createElement("div",{className:"input-group"},o.a.createElement("select",{className:"form-control",id:"project",onChange:e=>{h(e),x(e.target.value)},name:"Project",value:m.Project},null===w?o.a.createElement("option",{value:null,name:null},"Loading..."):o.a.createElement("option",{value:null,name:null},"Select Project"),null!==w&&0===(null===w||void 0===w?void 0:w.length)&&o.a.createElement("option",{value:null,name:null},"No projects Avaliable"),null!==w&&(null===w||void 0===w?void 0:w.length)>0&&w.map(e=>o.a.createElement("option",{name:null===e||void 0===e?void 0:e._id,value:null===e||void 0===e?void 0:e._id},null===e||void 0===e?void 0:e.Name))))),o.a.createElement("div",{className:"col-md-6 col-12 mb-2"},o.a.createElement("p",{className:"text-alternate"},"Select Building"),o.a.createElement("div",{className:"input-group"},o.a.createElement("select",{className:"form-control",id:"building",name:"Building",onChange:e=>{h(e),_(e.target.value)},value:m.Building},null===m.Project?o.a.createElement("option",{value:null,name:null},"First select Project"):o.a.createElement(o.a.Fragment,null,null===v&&o.a.createElement("option",{value:null,name:null},"Loading..."),null!==v&&0===(null===v||void 0===v?void 0:v.length)&&o.a.createElement("option",{value:null,name:null},"No Building Avaliable")),(null===v||void 0===v?void 0:v.length)>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement("option",{value:null,name:null},"Select Building"),null===v||void 0===v?void 0:v.map(e=>o.a.createElement(o.a.Fragment,null,o.a.createElement("option",{value:null===e||void 0===e?void 0:e._id,name:null===e||void 0===e?void 0:e._id},null===e||void 0===e?void 0:e.buildingName))))))),o.a.createElement("div",{className:"col-md-6 col-12 mb-2"},o.a.createElement("label",{htmlFor:"stageName",className:"text-alternate mb-2"}," ","Stage Name"),o.a.createElement("input",{type:"text",className:"form-control",id:"stageName",name:"stage_name",onChange:h,value:m.stage_name,required:""})),o.a.createElement("div",{className:"col-md-6 col-12 mb-2"},o.a.createElement("label",{htmlFor:"ammount",className:"text-alternate mb-2"}," ","Demand Rate(%)"),o.a.createElement("input",{type:"text",className:"form-control",id:"ammount",name:"amount",onChange:h,value:m.amount,required:""})),o.a.createElement("div",{className:"col-md-12 col-12 text-right"},e?o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{type:"button",class:"btn btn-outline-warning btn-md mb-1 mr-1",onClick:()=>{s({...m,Project:null,Building:null,stage_name:null,amount:null,extra_facilities:null,id:null}),t(!1)}}," ","Exit"," "),o.a.createElement("button",{type:"button",class:"btn btn-outline-primary btn-md mb-1 mr-1",onClick:()=>(async e=>{200===(await l.a.put("https://growbuild-jg.onrender.com/api/update/demand/"+e,{Project:m.Project,Building:m.Building,stage_name:m.stage_name,amount:parseFloat(m.amount).toFixed(2),extra_facilities:m.extra_facilities})).status&&(u()("Stage Updated successfully!","success"),setTimeout(()=>{N.go(0)},2e3))})(m.id)}," ","Update"," ")):o.a.createElement("button",{type:"button",class:"btn btn-outline-primary btn-md mb-1 mr-1",onClick:()=>(async()=>{200===(await l.a.post("https://growbuild-jg.onrender.com/api/create/demand",{Project:m.Project,Building:m.Building,stage_name:m.stage_name,amount:parseFloat(m.amount).toFixed(2),extra_facilities:m.extra_facilities})).status?(window.alert("Stage Created!"),window.location.reload()):window.alert("Something went wrong!")})()}," ","Create"," "))),!e&&o.a.createElement("form",{className:"row px-4 py-4 mx-2 my-2 shadow-lg needs-validation",novalidate:!0},o.a.createElement("h3",{className:"text-alternate text-primary"},"All Plans"),o.a.createElement("div",{className:"d-flex justify-content-center"},o.a.createElement("table",{className:"table table-striped table-responsive"},o.a.createElement("tr",null,o.a.createElement("th",null,"Sno."),o.a.createElement("th",null,"Project"),o.a.createElement("th",null,"Building"),o.a.createElement("th",null,"Stage Name"),o.a.createElement("th",null,"Demand Rate(%)"),o.a.createElement("th",null,"Action")),null===a||void 0===a?void 0:a.map((e,a)=>{let n=null===e||void 0===e?void 0:e._id;return o.a.createElement("tr",null,o.a.createElement("td",null,a+1),o.a.createElement("td",null,null===e||void 0===e?void 0:e.projectName),o.a.createElement("td",null,null===e||void 0===e?void 0:e.buildingName),o.a.createElement("td",null,null===e||void 0===e?void 0:e.stage_name),o.a.createElement("td",null,null===e||void 0===e?void 0:e.amount),o.a.createElement("td",null,o.a.createElement(i.a,{className:"cursor-pointer",color:"green",size:30,onClick:()=>{(async e=>{s({...m,Project:null===e||void 0===e?void 0:e.Project,Building:null===e||void 0===e?void 0:e.Building,stage_name:null===e||void 0===e?void 0:e.stage_name,amount:null===e||void 0===e?void 0:e.amount,extra_facilities:null===e||void 0===e?void 0:e.extra_facilities,id:null===e||void 0===e?void 0:e._id}),t(!0),await x(null===e||void 0===e?void 0:e.Project),s({...m,building:null===e||void 0===e?void 0:e.building}),await _(null===e||void 0===e?void 0:e.building),s({...m,Project:null===e||void 0===e?void 0:e.Project,Building:null===e||void 0===e?void 0:e.Building,stage_name:null===e||void 0===e?void 0:e.stage_name,amount:null===e||void 0===e?void 0:e.amount,extra_facilities:null===e||void 0===e?void 0:e.extra_facilities,id:null===e||void 0===e?void 0:e._id})})(e)}}),o.a.createElement(c.a,{className:"cursor-pointer",color:"red",size:30,onClick:()=>{(async e=>{const t=await u()({title:"Are you sure?",text:"Are you sure that you want to delete this Block?",icon:"warning",dangerMode:!0});if(t){await l.a.delete("https://growbuild-jg.onrender.com/api/delete/flat/"+e,{Headers:{"Content-Type":"application/json"}});f()}t()})(n)}})))}))))))}}}]);
//# sourceMappingURL=164.5e2fa40a.chunk.js.map