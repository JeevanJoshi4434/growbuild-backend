(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[167],{2212:function(e,l,a){"use strict";a.r(l);var t=a(28),n=a(0),o=a.n(n),i=a(849),c=a(62);l.default=()=>{var e,l;const[a,r]=Object(n.useState)(null),[u,m]=Object(n.useState)(!1),[d,s]=Object(n.useState)(null),[v,p]=Object(n.useState)({price:null,owner:null,floor:null,building:null,unit:null,flat:null,allotmentDate:null,parking:null,id:null,bookingDate:null,agreementDate:null,phoneNo:null,BookingId:null,addPayment:0}),[g,b]=Object(n.useState)(null),[E,h]=Object(n.useState)(null),[N,y]=Object(n.useState)([]);let f,j;const w=e=>{f=e.target.name,j=e.target.value,p({...v,[f]:j})},[P,k]=Object(n.useState)(null);Object(c.g)();Object(n.useEffect)(()=>{(async()=>{const e=await t.a.get("https://growbuild-jg.onrender.com/api/all/project",{Headers:{"Content-Type":"application/json"}});k(e.data)})()},[]);const _=async()=>{const e=await t.a.get("https://growbuild-jg.onrender.com"+"/api/get/maintanence?projectId=".concat(v.Project,"&buildingId=").concat(v.building,"&unitId=").concat(v.unit));y(e.data)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(i.d,null),o.a.createElement("div",{className:"container bg-white p-2 rounded-2"},o.a.createElement("form",{className:"row px-4 py-4 mx-2 my-2 justify-content-center shadow-lg"},o.a.createElement("h3",{className:"text-alternate text-primary"},"Collect Maintenance Payment"),o.a.createElement("hr",null),o.a.createElement("div",{className:"col-md-6 col-12 mb-2"},o.a.createElement("p",{className:"text-alternate"},"Select Project"),o.a.createElement("div",{className:"input-group"},o.a.createElement("select",{className:"form-control",id:"project",onChange:e=>{w(e),(async e=>{if((24===(null===e||void 0===e?void 0:e.length)||12===(null===e||void 0===e?void 0:e.length))&&"Select Project"!==e){const l=await t.a.get("".concat("https://growbuild-jg.onrender.com","/api/buildings/").concat(e),{Headers:{"Content-Type":"application/json"}});b(l.data)}})(e.target.value)},name:"Project",value:v.Project},null===P?o.a.createElement("option",{value:null,name:null},"Loading..."):o.a.createElement("option",{value:null,name:null},"Select Project"),null!==P&&0===(null===P||void 0===P?void 0:P.length)&&o.a.createElement("option",{value:null,name:null},"No projects Avaliable"),null!==P&&(null===P||void 0===P?void 0:P.length)>0&&P.map(e=>o.a.createElement("option",{name:null===e||void 0===e?void 0:e._id,value:null===e||void 0===e?void 0:e._id},null===e||void 0===e?void 0:e.Name))))),o.a.createElement("div",{className:"col-md-6 col-12 mb-2"},o.a.createElement("p",{className:"text-alternate"},"Select Building"),o.a.createElement("div",{className:"input-group"},o.a.createElement("select",{className:"form-control",id:"building",name:"building",onChange:e=>{w(e),(async e=>{if(24===(null===e||void 0===e?void 0:e.length)||12===(null===e||void 0===e?void 0:e.length)){const l=await t.a.get("".concat("https://growbuild-jg.onrender.com","/api/building/").concat(e),{Headers:{"Content-Type":"application/json"}});h(l.data)}})(e.target.value),(async(e,l)=>{if((24===(null===e||void 0===e?void 0:e.length)||12===(null===e||void 0===e?void 0:e.length))&&(24===(null===l||void 0===l?void 0:l.length)||12===(null===l||void 0===l?void 0:l.length))){const a=await t.a.get("".concat("https://growbuild-jg.onrender.com","/api/find/unit/").concat(e,"/").concat(l),{Headers:{"Content-Type":"application/json"}});s(a.data)}})(e.target.value,null===v||void 0===v?void 0:v.Project)},value:v.building},null===v.Project?o.a.createElement("option",{value:null,name:null},"First select Project"):o.a.createElement(o.a.Fragment,null,null===g&&o.a.createElement("option",{value:null,name:null},"Loading..."),null!==g&&0===(null===g||void 0===g?void 0:g.length)&&o.a.createElement("option",{value:null,name:null},"No Building Avaliable")),(null===g||void 0===g?void 0:g.length)>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement("option",{value:null,name:null},"Select Building"),null===g||void 0===g?void 0:g.map(e=>o.a.createElement(o.a.Fragment,null,o.a.createElement("option",{value:null===e||void 0===e?void 0:e._id,name:null===e||void 0===e?void 0:e._id},null===e||void 0===e?void 0:e.buildingName))))))),o.a.createElement("div",{className:"col-md-4 col-12 mb-2"},o.a.createElement("p",{className:"text-alternate"},"Select Floor"),o.a.createElement("div",{className:"input-group"},o.a.createElement("select",{className:"form-control",id:"floor",name:"floor",onChange:e=>{w(e)},value:v.floor},null===E?o.a.createElement("option",{value:null,name:null},"Loading..."):o.a.createElement("option",{value:null,name:null},"Select Floor"),null!==E&&0===(null===E||void 0===E?void 0:E.total_number_of_floors)&&o.a.createElement("option",{value:null,name:null},"No Floor Avaliable"),null!==E&&(null===E||void 0===E?void 0:E.total_number_of_floors)>0&&(e=>{const l=[];for(let a=1;a<=e;a++)l.push(o.a.createElement("option",{key:a,value:a},a));return l})(null===E||void 0===E?void 0:E.total_number_of_floors)))),o.a.createElement("div",{className:"col-md-4 col-12 mb-2"},o.a.createElement("p",{className:"text-alternate"},"Select Unit"),o.a.createElement("div",{className:"input-group"},o.a.createElement("select",{className:"form-control",id:"unit",name:"unit",onChange:e=>{w(e)},value:v.unit},null===v.Project&&null===v.building&&o.a.createElement("option",{value:null,name:null},"Select Project"),null===v.building&&null!==v.Project&&o.a.createElement("option",{value:null,name:null},"Select Building"),null!==v.building&&null!==v.Project&&null===d&&o.a.createElement("option",{value:null,name:null},"Loading..."),null!==d&&o.a.createElement(o.a.Fragment,null,0===d.length?o.a.createElement("option",{value:null,name:null},"No Units Avaliable."):o.a.createElement("option",{value:null,name:null},"Select Unit"),d.length>0&&d.map(e=>{let l="";if(l=e.unit_name,l=l.slice(0,1),l===v.floor)return o.a.createElement("option",{value:null===e||void 0===e?void 0:e._id,name:null===e||void 0===e?void 0:e._id},null===e||void 0===e?void 0:e.unit_name)}))))),o.a.createElement("div",{className:"col-md-4 col-12 mb-2"},o.a.createElement("p",{className:"text-alternate"},"Fetch Data"),o.a.createElement("button",{onClick:()=>(async(e,l,a)=>{if((12===e.length||24===e.length)&&(12===l.length||24===l.length)&&(12===a.length||24===a.length)){const n=await t.a.get("".concat("https://growbuild-jg.onrender.com","/api/").concat(e,"/").concat(l,"/").concat(a),{Headers:{"Content-Type":"application/json"}});if(201===n.status)m(!1),p({...v,price:0,owner:"No Record Found!",floor:v.floor,building:v.building,unit:v.unit,allotmentDate:null,parking:0,id:v.id,bookingDate:null,agreementDate:null});else if(200===n.status){m(!0),r(n.data),console.log(n.data);let e=n.data;p({...v,price:null===e||void 0===e?void 0:e.booking.booking_price,owner:null===e||void 0===e?void 0:e.booking.first_applicant_name,floor:v.floor,building:v.building,unit:v.unit,allotmentDate:null===e||void 0===e?void 0:e.booking.allotment_date,parking:null===e||void 0===e?void 0:e.booking.parking,id:v.id,bookingDate:null===e||void 0===e?void 0:e.booking.booking_date,agreementDate:null===e||void 0===e?void 0:e.booking.agreement_date,phoneNo:null===e||void 0===e?void 0:e.booking.first_applicant_contactNumber,BookingId:null===e||void 0===e?void 0:e.booking._id}),await _()}}})(v.building,v.Project,v.unit),type:"button",className:"btn btn-primary "},"View Details")),o.a.createElement("div",{className:"col-md-6 col-12 mb-2"},o.a.createElement("p",{className:"text-alternate"},"Owner Name"),o.a.createElement("div",{className:"input-group"},o.a.createElement("input",{type:"text","aria-label":"ownerName",placeholder:"Select Flat first",readonly:!0,value:null===v||void 0===v?void 0:v.owner,name:"owner",className:"form-control"}))),o.a.createElement("div",{className:"col-md-6 col-12 mb-2"},o.a.createElement("p",{className:"text-alternate"},"Owner Phone No"),o.a.createElement("div",{className:"input-group"},o.a.createElement("input",{type:"text","aria-label":"ownerPhone",placeholder:"Select Flat first",readonly:!0,name:"phone",className:"form-control",value:null===v||void 0===v?void 0:v.phoneNo}))),o.a.createElement("div",{className:"col-md-3 col-12 mb-2"},o.a.createElement("p",{className:"text-alternate"},"Total Maintenance Amount"),o.a.createElement("div",{className:"input-group"},o.a.createElement("input",{type:"text","aria-label":"MaintenanceAmount",placeholder:"Select Flat first",readonly:!0,name:"MaintenanceAmount",className:"form-control",value:N.length>0?parseFloat(null===(e=N[0])||void 0===e?void 0:e.MaintanenceCharges):0}))),o.a.createElement("div",{className:"col-md-3 col-12 mb-2"},o.a.createElement("p",{className:"text-alternate"},"Payment Due"),o.a.createElement("div",{className:"input-group"},o.a.createElement("input",{type:"number","aria-label":"due",placeholder:"Select Flat first",readonly:!0,name:"due",className:"form-control",value:N.length>0?parseFloat(null===(l=N[N.length-1])||void 0===l?void 0:l.MaintenanceCharges):0}))),o.a.createElement("div",{className:"col-md-3 col-12 mb-2"},o.a.createElement("p",{className:"text-alternate"},"Add Payment"),o.a.createElement("div",{className:"input-group"},o.a.createElement("input",{type:"number","aria-label":"addPayment",placeholder:"Select Flat first",readonly:!0,name:"addPayment",className:"form-control",value:null===v||void 0===v?void 0:v.addPayment,onChange:w}))),o.a.createElement("div",{className:"col-md-3 col-12 mb-2"},o.a.createElement("p",{className:"text-alternate"},"Add Payment"),o.a.createElement("button",{onClick:async()=>{var e;if(N.length<0||v.addPayment<=0)return;200===(await t.a.post("https://growbuild-jg.onrender.com/api/pay/maintenance",{paid:v.addPayment,total:null===(e=N[N.length-1])||void 0===e?void 0:e.MaintenanceCharges,bookingId:v.BookingId})).status&&(i.f.success("Payment Added",{position:i.f.POSITION.TOP_CENTER,autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),await _())},type:"button",className:"btn btn-primary "},"Add Payment"))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12"},o.a.createElement("div",{className:"table-responsive bg-white py-4 px-3 my-2 justify-content-center shadow-lg"},o.a.createElement("table",{id:"maintanence",className:"table table-striped table-bordered"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Sr. No."),o.a.createElement("th",null,"Total Amount"),o.a.createElement("th",null,"Paid Amount"),o.a.createElement("th",null,"Payment Date"),o.a.createElement("th",null,"Action"))),o.a.createElement("tbody",null,N.length>0&&N.map((e,l)=>o.a.createElement("tr",null,o.a.createElement("td",null,l+1),o.a.createElement("td",null,null===e||void 0===e?void 0:e.MaintenanceCharges),o.a.createElement("td",null,null===e||void 0===e?void 0:e.paid),o.a.createElement("td",null,null===e||void 0===e?void 0:e.paymentDate),o.a.createElement("td",null,o.a.createElement("button",{type:"button",class:"btn btn-primary"},"Print")))),o.a.createElement("tr",null,o.a.createElement("td",null,"Loading...")))))))))}}}]);
//# sourceMappingURL=167.a6b8db83.chunk.js.map